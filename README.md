# Secret_chat
 
Эта программа представляет собой приложение для записи и отправки сообщений в чат. Соответствующие сервисы реализованы в двух модулях `read_client.py` и `send_client.py`.

## Как установить
Python3 должен быть уже установлен. Затем необходимо создать виртуальную среду и установить зависимости после её запуска:

```
pip install -r requirements.txt
```

## Настройки программы
Для того, чтобы программа корректно работала, в папке с программой создайте файл .env, содержащий следующие данные:
```
TOKEN="ТОКЕН, ПОЛУЧЕННЫЙ ПРИ АВТОРИЗАЦИИ"
SEND_PORT="ПОРТ ДЛЯ ОТПРАВКИ СООБЩЕНИЙ" 
READ_PORT="ПОРТ ДЛЯ ЧТЕНИЯ И ЗАПИСИ СООБЩЕНИЙ"
HOST="ИМЯ ХОСТА"
```

Поскольку проект сделан в учебных целях, предполагается, что значение порта для отправки сообщений является `5050`, а для значение порта для чтения сообщений `5000`.
Имя хоста `minechat.dvmn.org`

## Как запустить
Модули запускаются из командной строки по отдельности:
```
python имя_модуля
```
### Запуск модуля для чтения и записи сообщений
Для запуска модуля необходимы значение порта для чтения и записи сообщения и значение хоста. По умолчанию программа берет эти значения из созданного .env файла, однако их можно ввести в командной строке при запуске программы:
```
--host значение хоста
--port значение порта для чтения и записи сообщений
```
Также можно указать путь для сохранения истории переписки (по умолчанию `chat_logs.txt`):
```
--log_path путь к файлу записи_чата
```
### Запуск модуля для отправки сообщений
Для запуска модуля необходимы значения порта для отправки сообщений, хоста и токена. По умолчанию программа также берет эти значения из созданного .env файла, однако их можно ввести в командной строке при запуске программы:
```
--host значение хоста
--port значение порта для отправки сообщения
--token значение токена
```
Также возможно указать:
```
--nickname имя пользователя, полученное при регистрации
--token_path путь_к_файлу, где сохранятеся токен после регистрации
--message отправляемое сообщение (по умолчанию в чат отправляется тестовое сообщение)
```
В том случае, если токен не указан ни в командной строке, ни файле .env, авторизации не произойдет, а происходит процесс регистрации нового пользователя. Новый токен сохраняется в отдельном файле `token.txt` в каталоге с программой.
После регистрации работа программы завершается. Полученный токен следует перенести в файл `.env` либо указать в командной строке при новом запуске программы.
Следует отметить, что пока функционал программы ограничен отправкой только одного сообщения.

## Цель проекта
Код написан в учебных целях — для курса по Python и веб-разработке на сайте [Devman](https://dvmn.org).
